#!/bin/bash

# Функция для вывода помощи
usage() {
    echo "Использование: $0 <директория> <имя архива>"
    exit 1
}

# Проверка аргументов
if [ $# -ne 2 ]; then
    usage
fi

# Получаем директорию и имя архива
directory=$1
archive_name=$2

# Проверяем, существует ли директория
if [ ! -d "$directory" ]; then
    echo "Ошибка: Директория '$directory' не существует."
    exit 1
fi

# Используем find для поиска файлов, измененных менее недели назад
files=$(find "$directory" -type f -mtime -7)

# Проверяем, есть ли такие файлы
if [ -z "$files" ]; then
    echo "Нет файлов, измененных менее недели назад, для архивации."
    exit 0
fi

# Архивируем найденные файлы
tar -cvf "$archive_name.tar" $files
echo "Архив '$archive_name.tar' создан с файлами, измененными менее недели назад."
